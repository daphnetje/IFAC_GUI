<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <!-- Custom styles for this template -->
    <link href={{url_for('static', filename="daphne_theme.css")}} rel="stylesheet">
    <!-- font awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <title>Data Explorer</title>
</head>

<body>

{% include 'navbar.html' %}

<div class = "container">
    <br>
    <h4> Discriminatory Patterns </h4>
</div>

<!-- want to show some kind of grid with different boxes for different discriminatory rules -->
<div class="container">
    <div class="row">
        {% for rule in rules %}
            {% if active_pattern_id == rule['id'] %}
                <div class="col-sm-4">
                    <div class="disc_pattern_upperbox">
                        <center> <h6> <a href= "{{url_for('inspect_patterns', pattern_id = rule['id'])}}" style="color:white;"> Rule {{loop.index}}</a> </h6> </center>
                    </div>
                    <div class="disc_pattern_middlebox">
                        <center> {{rule['rule_in_html']}} </center>
                    </div>
                    <div class="disc_pattern_lowerbox">
                        <center> support = {{rule['support']}}, confidence = {{rule['confidence']}}, slift = {{rule['slift']}}</center>
                    </div>
                </div>
            {% else %}
                <div class="col-sm-4">
                    <div class="disc_pattern_upperbox inactive_upperbox">
                        <center> <h6> <a href= "{{url_for('inspect_patterns', pattern_id = rule['id'])}}" style="color:white;"> Rule {{loop.index}} </a> </h6> </center>
                    </div>
                    <div class="disc_pattern_middlebox inactive_middlebox">
                        <center> {{rule['rule_in_html']}} </center>
                    </div>
                    <div class="disc_pattern_lowerbox inactive_lowerbox">
                        <center> support = {{rule['support']}}, confidence = {{rule['confidence']}}, slift = {{rule['slift']}}</center>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>

<div class="container">
    {% if number_of_affected_instances > 0 %}
        <p> There are {{number_of_affected_instances}} instances covered by this pattern </p>
    {% endif %}
</div>


<!-- This is where table will be shown -->
<div class = "container tableFixHead">
<table class="table table-condensed">
  <thead class="table-group-divider">
    <tr>
      {% for column_name in column_names %}
        {% if column_name not in numerical_cols %}
            <th scope="col">{{column_name}}</th>
        {% endif %}
      {% endfor %}
    </tr>
  </thead>

  <tbody>
    {% for i in indices_to_highlight %}
        {% if disc_scores_of_indices[loop.index0] >= 0.3 %}
            <tr class="table-danger">
        {% else %}
            <tr class="table-info">
        {% endif %}
          <td>{{dataset_results[i].age}}</td>
          <td>{{dataset_results[i].marital_status}}</td>
          <td>{{dataset_results[i].hours_per_week}}</td>
          <td>{{dataset_results[i].education}}</td>
          <td>{{dataset_results[i].work_sector}}</td>
          <td>{{dataset_results[i].occupation}}</td>
          <td>{{dataset_results[i].race}}</td>
          <td>{{dataset_results[i].sex}}</td>
          <td>{{dataset_results[i].income}}</td>
          <td>
              <form method="post">
                  <input type="hidden" name="selected_index" value="{{i}}">
                  <button class="btn btn-outline-secondary bg-white border-bottom-0 border rounded-pill ms-n5" type="submit">
                        <i class="fa fa-search"></i>
                  </button>
              </form>
          </td>
        </tr>
    {% endfor %}
    {% for result in dataset_results %}
        {% if loop.index0 not in indices_to_highlight %}
            <tr>
              <td>{{result.age}}</td>
              <td>{{result.marital_status}}</td>
              <td>{{result.hours_per_week}}</td>
              <td>{{result.education}}</td>
              <td>{{result.work_sector}}</td>
              <td>{{result.occupation}}</td>
              <td>{{result.race}}</td>
              <td>{{result.sex}}</td>
              <td>{{result.income}}</td>
            </tr>
        {% endif %}
    {% endfor %}
  </tbody>
  </table>
</div>






<!-- This is where table will be shown
<div class = "container tableFixHead">
<table class="table table-condensed">
  <thead class="table-group-divider">
    <tr>
      {% for column_name in column_names %}
        <th scope="col">{{column_name}}</th>
      {% endfor %}
    </tr>
  </thead>

  <tbody>
    {% for result in dataset_results %}
    {% if loop.index0 in indices_to_highlight %}
        <tr class="table-info">
    {% else %}
        <tr>
    {% endif %}
          <td>{{result.age}}</td>
          <td>{{result.hours_per_week}}</td>
          <td>{{result.education}}</td>
          <td>{{result.work_sector}}</td>
          <td>{{result.race}}</td>
          <td>{{result.sex}}</td>
          <td>{{result.income}}</td>
        </tr>
    {% endfor %}
  </tbody>
  </table>
</div>
-->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

</body>


</html>